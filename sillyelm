/**
 * @author å°ä½™å‘³
 * @description ğŸ’è¿™ä¸ªäººå¾ˆæ‡’ä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹ã€‚
 * @origin å°ä½™å‘³
 * @version v2.0.1
 * @create_at 2022-10-18 07:40:14
 * @title é¥¿äº†ä¹ˆ
 * @public true
 * @rule [å‚æ•°]é¥¿äº†
 * @encrypt true
 * @public false
 */
 
const test = new Bucket("YounWeriElm");
const s = sender;
var qq = s.getUserId();
//var qq = "";
var isAdmin = s.isAdmin();
const nickname = s.param("å‚æ•°")
var index = 1;
var nums5sec = "7b22617365727665723b32223a223965646534636336623932616430616266613137626236353561383164323334434e766176707347454b76667259614f31616e4a72414561447a49794d5451334e444d794e4467354d5441374d6a4330684f6e51426b4144227d";
main();
function main() {
    peizhijiance();
}
function peizhijiance() {
    var ispeizhi = test.get("peizhi");
    if (ispeizhi == "" || ispeizhi == null) {    //æ˜¯å¦ç¬¬ä¸€æ¬¡ä½¿ç”¨
        var s = sender;
        s.reply("ç¬¬ä¸€æ¬¡ä½¿ç”¨æœ¬è„šæœ¬ï¼Œè¯·ç¨ç­‰æ­£åœ¨åˆå§‹åŒ–é…ç½®");
        DeletePeiZhi();
        test.set("peizhi", "true");
        PzQlBianLiangName();
    } else {
        blackcheck();
    }
}
function InitializeQl() {
    var IsTrue = 0;
    var QlTongJson = test.get("QLS")
    var QlTongJsonParse = JSON.parse(QlTongJson);
    var QlTongNum = QlTongJsonParse.length;//é’é¾™å®¹å™¨æ•°é‡
    if (QlTongNum > 0) {
        // console.log(QlTongJson)
        for (i = 0; i < QlTongNum; i++) {
            qldizhi = QlTongJsonParse[i].host;
            qlclient_id = QlTongJsonParse[i].client_id;
            qlclient_secret = QlTongJsonParse[i].client_secret;
            var QlIsdisable = QlTongJsonParse[i].disable;
            if (!QlIsdisable) {
                qltoken(qldizhi, qlclient_id, qlclient_secret);
                var qlnums = qlselectelmnum();
                var qlnumjson = JSON.parse(qlnums)
                var QlRongQiRongLiang = test.get("QlRongQiRongLiang");
                if (qlnumjson.data.length <= QlRongQiRongLiang) {
                    i = 1000;
                }
                else {
                    IsTrue = IsTrue + 1;
                }
            }
        }
        if (IsTrue >= QlTongNum) {
            var s = sender;
            s.reply("å½“å‰å¯ç”¨å®¹å™¨ä½™é‡ä¸è¶³ï¼Œè¯·è”ç³»ç®¡ç†å‘˜æ£€æŸ¥")
            return false;
        }
    } else {
        var s = sender;
        s.reply("å½“å‰å¯ç”¨å®¹å™¨ä¸è¶³ï¼Œè¯·è”ç³»ç®¡ç†å‘˜æ£€æŸ¥")
        return false;
    }
}
function ShouQuan(shouquanma) {
    var body = request({
        url: "https://sq.younweri.top/api/card_app/check",
        method: "post",
        body: {
            "appid": "1",
            "card": shouquanma,
        },
    })
    return body.body;
}
function DeletePeiZhi() {
    test.delete("RebotName");
    test.delete("PtShouQuanMa");
    test.delete("DxShouQuanMa");
    test.delete("QlRongQiRongLiang");
    test.delete("QlBianLiangName");
    test.delete("RebotIsImages");
    test.delete("peizhi");
    test.delete("XuanZeTong");
}
function PzQlBianLiangName() {//è®¾ç½®é’é¾™å˜é‡åç§°
    var s = sender;
    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„é’é¾™å˜é‡åç§°ï¼Œä¾‹å¦‚elmckæˆ–elmCookie(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
    var newS = s.listen(20000)
    if (newS == null) {
        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡é…ç½®ã€‚")
        DeletePeiZhi();
    } else {
        if (newS.getContent() == "q" || newS.getContent() == "Q") {
            newS.reply("å·²é€€å‡ºä¼šè¯,å½“å‰é…ç½®å·²åˆ é™¤ï¼Œè¯·é‡æ–°é…ç½®ï¼");
            DeletePeiZhi();
        }
        else {
            var QlBianLiangName = newS.getContent();
            s.reply("è®¾ç½®æˆåŠŸï¼Œä¸‹é¢å¼€å§‹é…ç½®æ‚¨çš„æœºå™¨äººåç§°");
            test.set("QlBianLiangName", QlBianLiangName);
            PzRebotName();
        }
    }
}
function PzRebotName() {
    var s = sender;
    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„æœºå™¨äººåç§°(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
    var newS = s.listen(20000)
    if (newS == null) {
        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡é…ç½®ã€‚")
        DeletePeiZhi();
    } else {
        if (newS.getContent() == "q" || newS.getContent() == "Q") {
            newS.reply("å·²é€€å‡ºä¼šè¯,å½“å‰é…ç½®å·²åˆ é™¤ï¼Œè¯·é‡æ–°é…ç½®ï¼");
            DeletePeiZhi();
        } else {
            var RebotName = newS.getContent();
            s.reply("è®¾ç½®æˆåŠŸï¼Œä¸‹é¢å¼€å§‹é…ç½®å®¹å™¨å®¹é‡")
            test.set("RebotName", RebotName);
            PzQLS();
        }
    }
}
function PzQLS() {
    var s = sender;
    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„é’é¾™åœ°å€,ä¸è¦å¸¦æ–œæ (è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
    var newS = s.listen(20000)
    if (newS == null) {
        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡é…ç½®ã€‚")
        DeletePeiZhi();
    } else {
        if (newS.getContent() == "q" || newS.getContent() == "Q") {
            newS.reply("å·²é€€å‡ºä¼šè¯,å½“å‰é…ç½®å·²åˆ é™¤ï¼Œè¯·é‡æ–°é…ç½®ï¼");
            DeletePeiZhi();
        } else {
            var QlAddress = newS.getContent();
            s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„é’é¾™client_id(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
            var newS = s.listen(20000)
            if (newS == null) {
                s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡é…ç½®ã€‚")
                DeletePeiZhi();
            } else {
                if (newS.getContent() == "q" || newS.getContent() == "Q") {
                    newS.reply("å·²é€€å‡ºä¼šè¯,å½“å‰é…ç½®å·²åˆ é™¤ï¼Œè¯·é‡æ–°é…ç½®ï¼");
                    DeletePeiZhi();
                } else {
                    var Qlclient_id = newS.getContent();
                    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„é’é¾™client_secret(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
                    var newS = s.listen(20000)
                    if (newS == null) {
                        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡é…ç½®ã€‚")
                        DeletePeiZhi();
                    } else {
                        if (newS.getContent() == "q" || newS.getContent() == "Q") {
                            newS.reply("å·²é€€å‡ºä¼šè¯,å½“å‰é…ç½®å·²åˆ é™¤ï¼Œè¯·é‡æ–°é…ç½®ï¼");
                            DeletePeiZhi();
                        } else {
                            var Qlclient_secret = newS.getContent();
                            var values = "[{\"host\":\"" + QlAddress + "\",\"client_id\":\"" + Qlclient_id + "\",\"client_secret\":\"" + Qlclient_secret + "\"}]"
                            test.set("QLS", values)
                            var s = sender;
                            s.reply("é’é¾™é…ç½®å®Œæˆï¼Œä¸‹é¢å¼€å§‹é…ç½®é’é¾™å®¹å™¨å®¹é‡");
                            PzQlRongQiRongLiang();
                        }
                    }
                }
            }
        }
    }
}
function PzQlRongQiRongLiang() {
    var s = sender;
    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„é’é¾™å®¹å™¨å®¹é‡ï¼Œåˆ«è¾“å…¥é”™è¯¯ï¼Œå¦åˆ™é‡æ–°é…ç½®ï¼(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
    var newS = s.listen(20000)
    if (newS == null) {
        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡é…ç½®ã€‚")
        DeletePeiZhi();
    } else {
        if (newS.getContent() == "q" || newS.getContent() == "Q") {
            newS.reply("å·²é€€å‡ºä¼šè¯,å½“å‰é…ç½®å·²åˆ é™¤ï¼Œè¯·é‡æ–°é…ç½®ï¼");
            DeletePeiZhi();
        } else {
            var QlRongQiRongLiang = newS.getContent();
            s.reply("è®¾ç½®æˆåŠŸï¼Œä¸‹é¢å¼€å§‹é…ç½®æ˜¯å¦å¼€å¯æœºå™¨äººå‘é€ç”¨æˆ·å¤´åƒ")
            test.set("QlRongQiRongLiang", QlRongQiRongLiang);
            PzRebotIsImages();
        }
    }
}
function PzRebotIsImages() {
    var s = sender;
    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æœºå™¨äººæ˜¯å¦å‘é€ç”¨æˆ·å¤´åƒä¿¡æ¯ï¼Œtrue/false(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
    var newS = s.listen(20000)
    if (newS == null) {
        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡é…ç½®ã€‚")
        DeletePeiZhi();
    } else {
        if (newS.getContent() == "q" || newS.getContent() == "Q") {
            newS.reply("å·²é€€å‡ºä¼šè¯,å½“å‰é…ç½®å·²åˆ é™¤ï¼Œè¯·é‡æ–°é…ç½®ï¼");
            DeletePeiZhi();
        } else {
            var RebotIsImages = newS.getContent();
            if (RebotIsImages == "true" || RebotIsImages == "false") {
                s.reply("è®¾ç½®æˆåŠŸï¼Œæ’ä»¶é…ç½®å®Œæˆï¼Œå°½æƒ…ä½¿ç”¨å§")
                test.set("RebotIsImages", RebotIsImages);
                PzHelDui();
            } else {
                s.reply("è¾“å…¥é”™è¯¯ï¼Œæœºå™¨äººé»˜è®¤å‘é€ç”¨æˆ·å¤´åƒ")
                test.set("RebotIsImages", "true");
                PzHelDui();
            }
        }
    }
}
function UerSillyGrilElmJs() {
    if (nickname == "æ‹‰é»‘") {
        if (isAdmin) {
            var s = sender;
            s.reply("è¯·åœ¨å‘ŠçŸ¥æˆ‘éœ€è¦æ‹‰é»‘çš„ç”¨æˆ·ID(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)")
            var newS = s.listen(20000)
            if (newS == null) {
                s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡è®°å½•ã€‚")
            } else {
                if (newS.getContent() == "q" || newS.getContent() == "Q") {
                    newS.reply("å·²é€€å‡ºä¼šè¯");
                } else {
                    blackset(newS.getContent());
                }
            }
        }
    }
    else if (nickname == "è§£é»‘") {
        if (isAdmin) {
            var s = sender;
            s.reply("è¯·åœ¨å‘ŠçŸ¥æˆ‘éœ€è¦è§£é»‘çš„ç”¨æˆ·ID(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)")
            var newS = s.listen(20000)
            if (newS == null) {
                s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡è®°å½•ã€‚")
            } else {
                if (newS.getContent() == "q" || newS.getContent() == "Q") {
                    newS.reply("å·²é€€å‡ºä¼šè¯");
                } else {
                    blackdelete(newS.getContent());
                }
            }
        }
    }
    else if (nickname == "ç®¡ç†") {
        if (isAdmin) {
            var s = sender;
            s.reply("é¥¿äº†ä¹ˆç®¡ç†èœå•\n1.åˆ é™¤æ‰€æœ‰é…ç½®(æ…ç”¨)\n2.ä¿®æ”¹æ™®é€šåŠŸèƒ½æˆæƒç \n3.ä¿®æ”¹çŸ­ä¿¡åŠŸèƒ½æˆæƒç \n4.ä¿®æ”¹æœºå™¨äººåç§°\n5.ä¿®æ”¹é’é¾™å®¹å™¨å®¹é‡\n6.ä¿®æ”¹é’é¾™å˜é‡åç§°\n7.ä¿®æ”¹æ˜¯å¦å‘é€ç”¨æˆ·å¤´åƒ\n8.ä¿®æ”¹é’é¾™é…ç½®\nå‘é€â€œqâ€é€€å‡ºå½“å‰ä¼šè¯ã€‚")
            var newS = s.listen()
            if (newS == null) {
                s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œé€€å‡ºå½“å‰ä¼šè¯ã€‚")
            } else {
                var num = newS.getContent();
                if (num == "q" || num == "Q") {
                    newS.reply("å·²é€€å‡ºä¼šè¯");
                } else if (num == "1") {
                    var s = sender;
                    s.reply("å·²åˆ é™¤æ‰€æœ‰æœ¬æ’ä»¶é…ç½®");
                    DeletePeiZhi();
                }
                else if (num == "2") {
                    s.reply("å·²å‰”é™¤æˆæƒç ");
                   
                }
                else if (num == "3") {
                    s.reply("å·²å‰”é™¤æˆæƒç ");
                }
                else if (num == "4") {
                    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨ä¿®æ”¹çš„æœºå™¨äººæ–°åç§°(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
                    var newS = s.listen(20000)
                    if (newS == null) {
                        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œé»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚")
                    } else {
                        if (newS.getContent() == "q" || newS.getContent() == "Q") {
                            newS.reply("å·²é€€å‡ºä¼šè¯,é»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚");
                        } else {
                            var RebotName = newS.getContent();
                            var s = sender;
                            s.reply("å·²ä¸ºæ‚¨æˆåŠŸæ›´æ–°ï¼Œå½“å‰æœºå™¨äººåç§°ä¸º:" + RebotName);
                            test.delete("RebotName");
                            test.set("RebotName", RebotName);
                        }
                    }
                }
                else if (num == "5") {
                    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ–°çš„é’é¾™å®¹å™¨å®¹é‡(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
                    var newS = s.listen(20000)
                    if (newS == null) {
                        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œé»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚")
                    } else {
                        if (newS.getContent() == "q" || newS.getContent() == "Q") {
                            newS.reply("å·²é€€å‡ºä¼šè¯,é»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚");
                        } else {
                            var QlRongQiRongLiang = newS.getContent();
                            var s = sender;
                            s.reply("å·²ä¸ºæ‚¨æˆåŠŸæ›´æ–°ï¼Œå½“å‰é’é¾™å®¹é‡ä¸º:" + QlRongQiRongLiang);
                            test.delete("QlRongQiRongLiang");
                            test.set("QlRongQiRongLiang", QlRongQiRongLiang);
                        }
                    }
                }
                else if (num == "6") {
                    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ–°çš„é’é¾™å˜é‡åç§°(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
                    var newS = s.listen(20000)
                    if (newS == null) {
                        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œé»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚")
                    } else {
                        if (newS.getContent() == "q" || newS.getContent() == "Q") {
                            newS.reply("å·²é€€å‡ºä¼šè¯,é»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚");
                        } else {
                            var QlBianLiangName = newS.getContent();
                            var s = sender;
                            s.reply("å·²ä¸ºæ‚¨æˆåŠŸæ›´æ–°ï¼Œå½“å‰é’é¾™å˜é‡åç§°ä¸º:" + QlBianLiangName);
                            test.delete("QlBianLiangName");
                            test.set("QlBianLiangName", QlBianLiangName);
                        }
                    }
                }
                else if (num == "7") {
                    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ˜¯å¦å‘é€ç”¨æˆ·å¤´åƒtrue/false(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
                    var newS = s.listen(20000)
                    if (newS == null) {
                        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œé»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚")
                    } else {
                        if (newS.getContent() == "q" || newS.getContent() == "Q") {
                            newS.reply("å·²é€€å‡ºä¼šè¯,é»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚");
                        } else {
                            var RebotIsImages = newS.getContent();
                            if (RebotIsImages == "true" || RebotIsImages == "false") {
                                var s = sender;
                                s.reply("å·²ä¸ºæ‚¨æˆåŠŸæ›´æ–°ï¼Œå½“å‰æ˜¯å¦å‘é€ç”¨æˆ·å¤´åƒä¸º:" + RebotIsImages);
                                test.delete("RebotIsImages");
                                test.set("RebotIsImages", RebotIsImages);
                            } else {
                                var s = sender;
                                s.reply("è¾“å…¥é”™è¯¯ï¼Œé»˜è®¤å‘é€ç”¨æˆ·å¤´åƒ");
                                test.delete("RebotIsImages");
                                test.set("RebotIsImages", "true");
                            }
                        }
                    }
                }
                else if (num == "8") {
                    var s = sender;
                    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„é’é¾™åœ°å€,ä¸è¦å¸¦æ–œæ (è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
                    var newS = s.listen(20000)
                    if (newS == null) {
                        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œé»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚")
                    } else {
                        if (newS.getContent() == "q" || newS.getContent() == "Q") {
                            newS.reply("å·²é€€å‡ºä¼šè¯,é»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚");
                        } else {
                            var QlAddress = newS.getContent();
                            s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„é’é¾™client_id(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
                            var newS = s.listen(20000)
                            if (newS == null) {
                                s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œé»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚")
                            } else {
                                if (newS.getContent() == "q" || newS.getContent() == "Q") {
                                    newS.reply("å·²é€€å‡ºä¼šè¯,é»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚");
                                } else {
                                    var Qlclient_id = newS.getContent();
                                    s.reply("è¯·åœ¨20ç§’å‘ŠçŸ¥æˆ‘æ‚¨éœ€è¦è®¾ç½®çš„é’é¾™client_secret(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)");
                                    var newS = s.listen(20000)
                                    if (newS == null) {
                                        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œé»˜è®¤ä¸ä¿®æ”¹é…ç½®ã€‚")
                                    } else {
                                        if (newS.getContent() == "q" || newS.getContent() == "Q") {
                                            newS.reply("å·²é€€å‡ºä¼šè¯,æœªä½œä¿®æ”¹ï¼");
                                        } else {
                                            var Qlclient_secret = newS.getContent();
                                            var values = "[{\"host\":" + QlAddress + ",\"client_id\":" + Qlclient_id + ",\"client_secret\":" + Qlclient_secret + "}]"
                                            test.delete("QLS")
                                            test.set("QLS", values)
                                            s.reply("é’é¾™é…ç½®å·²ä¿®æ”¹");
                                        }
                                    }
                                }
                            }
                        }
                    }
                } else {
                    var s = sender;
                    s.reply("è¾“å…¥é”™è¯¯ï¼Œå·²é€€å‡ºä¼šè¯ã€‚");
                }
            }
        }
    }
    else if (nickname == "æŸ¥è¯¢" || nickname == "è®°å½•") {
            if (nickname == "æŸ¥è¯¢") {
                SelectElm();
            }
            if (nickname == "è®°å½•") {
                var isInitializeQl = InitializeQl();
                if (isInitializeQl == "false" || isInitializeQl == false) {
                    return;
                } else {
                    InsertElm();
                }
            }
    }
}
function InsertElm() {
    var s = sender;
    s.reply(test.get("RebotName") + "ä¸ºæ‚¨æœåŠ¡,è¯·åœ¨20ç§’å†…å‘é€æ‚¨çš„Cookie(è¾“å…¥â€œqâ€éšæ—¶é€€å‡ºä¼šè¯ã€‚)")
    var newS = s.listen(20000)//è¿”å›ä¸€ä¸ªsenderå¯¹è±¡ï¼Œè¶…æ—¶åè¿”å›null
    if (newS == null) {
        s.reply("è¶…æ—¶ï¼Œ20ç§’å†…æœªå›å¤ï¼Œå–æ¶ˆæœ¬æ¬¡è®°å½•ã€‚")
    } else {
        if (newS.getContent() == "q" || newS.getContent() == "Q") {
            newS.reply("å·²é€€å‡ºä¼šè¯");
        } else {
            try {
                var ck = newS.getContent();
                const messageId = newS.getMessageId();
                s.recallMessage(messageId);
                var elmapibody = elmapi(ck);
                //  console.log(userjson)
                if (elmapibody.indexOf("æœªç™»å½•") >= 0) {
                    s.reply("ckå·²ç»å¤±æ•ˆæˆ–æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ä»¥ååœ¨å‘é€~");
                } else {
                    var userjson = JSON.parse(elmapibody);
                    var userid = userjson.user_id;
                    var username = userjson.username;
                    var qlinsertbody = qlinsert(ck, userid, username)
                    var qlinsertbodyjson = JSON.parse(qlinsertbody)
                    if (qlinsertbodyjson.code == "200") {
                        s.reply('ä¸Šè½¦æˆåŠŸï¼Œæ­£åœ¨ä¸ºæ‚¨æŸ¥è¯¢è´¦å·ä¿¡æ¯~');
                        XinXiZhanShi(ck);
                        //   s.reply("0å¾©åˆ¶è¿™ä¸ª 2:/ï¼„dcTj22fï¼„~.é¥¿äº†ä¹ˆAppã€å¿«ä¾†é ˜å¤–è³£ç´…åŒ…ï¼Œæœ€é«˜20å…ƒï¼Œäººäººéƒ½æœ‰å“¦~ã€‘");
                    } else {
                        s.reply("ä¸Šè½¦å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®");
                    }
                }
            }
            catch {
                var s = sender;
                s.reply("ä¸Šè½¦å¤±è´¥ï¼Œè¯·æ£€æŸ¥CKæ˜¯å¦æ­£ç¡®");
            }
        }
    }
}
function SelectElm() {
    s.reply(test.get("RebotName") + "æ­£åœ¨ä¸ºæ‚¨æŸ¥è¯¢æœ¬åœ°æ‰€æœ‰é¥¿äº†ä¹ˆèµ„äº§~")
    var nums = 1;
    var QlTongJson = test.get("QLS");
    var QlTongJsonParse = JSON.parse(QlTongJson);
    var QlTongNum = QlTongJsonParse.length;//é’é¾™å®¹å™¨æ•°é‡   
    for (i = 0; i < QlTongNum; i++) {
        qldizhi = QlTongJsonParse[i].host;
        qlclient_id = QlTongJsonParse[i].client_id;
        qlclient_secret = QlTongJsonParse[i].client_secret;
        var QlIsdisable = QlTongJsonParse[i].disable;
        if (!QlIsdisable) {
            qltoken(qldizhi, qlclient_id, qlclient_secret);
            var qlselectbody = qlselect(qq);
            var qlckjson = JSON.parse(qlselectbody)
            //  console.log(qlselectbody)
            if (qlckjson.data == "") {
                nums = nums + 1;
            } else {
                for (var key in qlckjson.data) {
                    if (qlckjson.data[key].name == test.get("QlBianLiangName")) {
                        var ck = qlckjson.data[key].value;
                        var id = qlckjson.data[key].id;
                        var remarks = qlckjson.data[key].remarks;
                        remarks = remarks.split("&")[1];
                        var elmapibody = elmapi(ck)
                        var xx = JSON.parse(elmapibody);
                        if (xx.message == "æœªç™»å½•" || xx.message == "æœªçŸ¥é”™è¯¯") {
                            s.reply("è´¦å· " + remarks + " å·²è¿‡æœŸ,è¯·é‡æ–°è·å–Ck,ç³»ç»Ÿå·²åˆ é™¤Ck");
                            qldelete(id);
                        } else {
                            XinXiZhanShi(ck);
                        }
                    }
                }
            }
        }
    }
    if (nums > QlTongNum) {
        s.reply(test.get("RebotName") + "æé†’æ‚¨ï¼šæ— æœ¬åœ°é¥¿äº†ä¹ˆè´¦å·ä¿¡æ¯ï¼Œè¯·æ‚¨æ£€æŸ¥æ˜¯å¦å·²ä¸Šè½¦~");
    }
}
function XinXiZhanShi(ck) {
    var elmapibody = elmapi(ck)
    var xx = JSON.parse(elmapibody);
    var elmxqapibody = elmxqapi(ck);
    var dzxx = JSON.parse(elmxqapibody);
    var d = new Date();
    var nf = d.getFullYear().toString();;
    var yf = d.getMonth() + 1;
    var rf = d.getDate();
    if (rf < 10) {
        rf = "0" + rf;
    }
    var rq = nf + yf;
    var jinridouzi = 0;
    for (var zh in dzxx.records) {
        if (dzxx.records[zh].createdTime.indexOf(nf + "-" + yf + "-" + rf) >= 0) {
            if (dzxx.records[zh].optType == "1") {
                jinridouzi = jinridouzi + dzxx.records[zh].count;
            } else {
                inridouzi = jinridouzi + 0;
            }
        }
    }
    var benyuedouzi = "";
    try {
        benyuedouzi = dzxx.monthAccountInfo[rq].plusCount
    } catch {
        benyuedouzi = "æŸ¥è¯¢å¼‚å¸¸ï¼Œè¯·å»APPé¢†å‡ ä¸ªè±†å­å†æ¥æŸ¥è¯¢";
    }
    var zongongdouzi = dzxx.peaCount;
    var pinimg = xx.avatar;
    var userimg = "https://cube.elemecdn.com/" + pinimg.substr(0, 1) + "/" + pinimg.substr(1, 2) + "/" + pinimg.slice(3) + ".jpeg";
    var userid = xx.user_id;
    var username = xx.username;
    var ckzt = "";
    if (xx.is_mobile_valid == true) {
        ckzt = "Cookieæœ‰æ•ˆ";
    } else {
        ckzt = "Cookieå¤±æ•ˆ";
    }
    var bbfbody = elmbbfapi(ck);
    var ye = JSON.parse(bbfbody);
    var bbf = ye.data.totalAvailableAmount / 100;
    var isImages = test.get("RebotIsImages")
    if (isImages == true || isImages == "true") {
        s.reply(image(userimg) + "åºå·:" + index + "\n" + "IDï¼š" + qq + "\n" + "æ˜µç§°ï¼š" + username + "\n" + "é¥¿äº†ä¹ˆIDï¼š" + userid + "\n" + "CookieçŠ¶æ€ï¼š" + ckzt + "\n" + "å½“å‰è±†è±†ï¼š" + zongongdouzi + "\n" + "ä»Šæ—¥æ”¶å…¥ï¼š" + jinridouzi + "\n" + "æœ¬æœˆæ”¶å…¥ï¼š" + benyuedouzi + "\n" + "ç¬”ç¬”è¿”ä½™é¢ï¼š" + bbf);
    } else {
        s.reply("åºå·:" + index + "\n" + "IDï¼š" + qq + "\n" + "æ˜µç§°ï¼š" + username + "\n" + "é¥¿äº†ä¹ˆIDï¼š" + userid + "\n" + "CookieçŠ¶æ€ï¼š" + ckzt + "\n" + "å½“å‰è±†è±†ï¼š" + zongongdouzi + "\n" + "ä»Šæ—¥æ”¶å…¥ï¼š" + jinridouzi + "\n" + "æœ¬æœˆæ”¶å…¥ï¼š" + benyuedouzi + "\n" + "ç¬”ç¬”è¿”ä½™é¢ï¼š" + bbf);
    }
    index = index + 1;
}
var qldizhi = "";
var qlclient_id = "";
var qlclient_secret = "";
var qltokens = "";
var cookie2 = "";
var _tb_token = "";
var _csrf_token = "";
var umidToken = "";
var hsiz = "";
var xsrftoken = "";
var t = "";
//è¯·æ±‚é¥¿äº†ä¹ˆä¸ªäººä¿¡æ¯æ¥å£æ–¹æ³•
function elmapi(ck) {
    var { body, headers, status } = request({
        url: "https://restapi.ele.me/eus/v5/user_detail",
        method: "get",
        headers: {
            "cookie": ck,
        },
    })
    return body;
}
//è¯·æ±‚é¥¿äº†ä¹ˆè±†å­è¯¦æƒ…æ–¹æ³•
function elmxqapi(ck) {
    var { body, headers, status } = request({
        url: "https://h5.ele.me/restapi/svip_biz/v1/supervip/foodie/records?offset=0&limit=100&longitude=116.397128&latitude=39.916527",
        method: "get",
        headers: {
            "cookie": ck,
        },
    })
    return body
}
//é¥¿äº†ä¹ˆç¬”ç¬”è¿”ä½™é¢æ–¹æ³•
function elmbbfapi(ck) {
    var { body, headers, status } = request({
        url: "https://wallet.ele.me/api/storedcard/queryBalanceBycardType?cardType=platform",
        method: "get",
        headers: {
            "cookie": ck,
        },
    })
    return body;
}
//è¯·æ±‚é’é¾™é¢æ¿è¿”å›tokenæ–¹æ³•
function qltoken(qldizhi, qlclient_id, qlclient_secret) {
    var { body, headers, status } = request({
        url: qldizhi + "/open/auth/token?client_id=" + qlclient_id + "&client_secret=" + qlclient_secret,
        method: "get",
    });
    var fhtoken = JSON.parse(body);
    qltokens = fhtoken.data.token;
}
//è¯·æ±‚é’é¾™é¢æ¿æŸ¥è¯¢æ–¹æ³•
function qlselect(qq) {
    var { body, headers, status } = request({
        url: qldizhi + "/open/envs?searchValue=" + qq,
        method: "get",
        headers: {
            "Authorization": "Bearer " + qltokens,
        }
    });
    return body;
}
//è·å–å½“å‰å®¹å™¨é¥¿äº†ä¹ˆCKå®¹é‡
function qlselectelmnum() {
    var { body, headers, status } = request({
        url: qldizhi + "/open/envs?searchValue=" + test.get("QlBianLiangName"),
        method: "get",
        headers: {
            "Authorization": "Bearer " + qltokens,
        }
    });

    return body;
}
//è¯·æ±‚é’é¾™é¢æ¿æ›´æ–°æ–¹æ³•
function qlupdate(ck, id, userid, username) {
    var { body, headers, status } = request({
        url: qldizhi + "/open/envs",
        method: "put",
        body: {
            "name": test.get("QlBianLiangName"),
            "value": ck,
            "id": id,
            "remarks": qq + "@" + userid + "&" + username,
        },
        headers: {
            "Authorization": "Bearer " + qltokens,
        }
    });
    return body;
}
//é’é¾™é¢æ¿æ·»åŠ æ–¹æ³•
function qlinsert(ck, userid, username) {
    var zhanghao = qq + "@" + userid + "&" + username;
    var nums = 1;
    var QlTongJson = test.get("QLS");
    var QlTongJsonParse = JSON.parse(QlTongJson);
    var QlTongNum = QlTongJsonParse.length;//é’é¾™å®¹å™¨æ•°é‡   
    for (i = 0; i < QlTongNum; i++) {
        qldizhi = QlTongJsonParse[i].host;
        qlclient_id = QlTongJsonParse[i].client_id;
        qlclient_secret = QlTongJsonParse[i].client_secret;
        var QlIsdisable = QlTongJsonParse[i].disable;
        if (!QlIsdisable) {
            qltoken(qldizhi, qlclient_id, qlclient_secret);
            var qlselectbody = qlselect(zhanghao);
            var qlckjson = JSON.parse(qlselectbody)
            //  console.log(qlselectbody)
            if (qlckjson.data.length == "0") {
                nums = nums + 1;
            } else {
                //    console.log("æ‰§è¡Œæ›´æ–°")
                var aa = qlupdate(ck, qlckjson.data[0].id, userid, username)
                return aa;
            }
        }
    }
    if (nums > QlTongNum) {
        //æ‰§è¡Œæ·»åŠ 
        //   console.log("æ‰§è¡Œæ·»åŠ ")
        var { body, headers, status } = request({
            url: qldizhi + "/open/envs",
            method: "post",
            body: [{
                "name": test.get("QlBianLiangName"),
                "value": ck,
                "remarks": qq + "@" + userid + "&" + username,
            }],
            headers: {
                "Authorization": "Bearer " + qltokens,
            }
        });
        return body;
    }
}
//é’é¾™é¢æ¿åˆ é™¤æ–¹æ³•
function qldelete(id) {
    var body = request({
        url: qldizhi + "/open/envs",
        method: "delete",
        body: [id],
        headers: {
            "Authorization": "Bearer " + qltokens,
        }
    });
}
function blackcheck() {//æ‹‰é»‘æŸ¥è¯¢
    var IsBlack = test.get(qq)
    if (IsBlack == "" || IsBlack == null) {
        UerSillyGrilElmJs();
    }
    else {
        var s = sender;
        s.reply("é»‘åå•ç”¨æˆ·ï¼Œè¯·è”ç³»ç®¡ç†å‘˜è§£é™¤ï¼")
    }
}
function blackset(laheiid) {//æ‹‰é»‘
    var blackid = laheiid;
    var tip = "true"
    test.set(blackid, tip)
    var s = sender;
    s.reply(RebotName + "æé†’æ‚¨ï¼šç”¨æˆ·ï¼š" + blackid + "ï¼Œå·²è¢«æ‹‰é»‘ã€‚")

}
function blackdelete(jieheiid) {//è§£é»‘

    var blackid = jieheiid;
    test.delete(blackid)
    var s = sender;
    s.reply(RebotName + "æé†’æ‚¨ï¼šç”¨æˆ·ï¼š" + blackid + "ï¼Œå·²è¢«ä»æ…ˆçš„ä¸»äººè§£é™¤äº†æ‹‰é»‘ï¼")
}
